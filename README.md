

# テーブル設計


## users テーブル

| Column             | Type   | Options     |
| ------------------ | ------ | ----------- |
| name               | string | null: false |
| email              | string | null: false |
| encrypted_password | string | null: false |




## locations テーブル

| Column             | Type       | Options                        |
| ------------------ | ---------- | ------------------------------ |
| place              | string     | null: false                    |
| address            | string     | null: false                    |
| contact_address    | string     | null: false                    |
| fee                | string     |                                |
| info               | text       |                                |
| image              | text       |                                |
| user               | references | null: false, foreign_key: true |


## events テーブル

| Column             | Type       | Options                        |
| ------------------ | ---------- | ------------------------------ |
| title              | string     | null: false                    |
| start_time         | datetime   | null: false                    |
| user               | references | null: false, foreign_key: true |
| location           | references | null: false, foreign_key: true |


# アプリケーション概要
キッチンカー の出店場所およびスケジュールの共有アプリです。
出店場所のMap・出店料・連絡先・詳細情報などの詳細も投稿でき、場所ごとにいつ誰が出店するのかをユーザー(オーナー)同士で共有できます。

# URL
https://food-truck.onrender.com

# テスト用アカウント
ID: admin

Pass: 2222

メールアドレス: aaa@111

パスワード: aaa111

# 動作確認方法
　1.ユーザー登録後、ヘッダーの「場所の登録」ボタンより出店場所の投稿ページへ遷移、
場所名・住所・連絡先(任意で写真・出店料・詳細情報)を入力後登録ボタンで投稿ができま　　す。

　2.TOPページで現在投稿済みの場所を県別に一覧で閲覧できます。投稿をクリックすると詳細が表示されます。

　3.場所の詳細ページの「出店状況の確認」ボタンから場所ごとのカレンダーを表示できます。

　4.カレンダー表示ページよりキッチンカー名・日時を入力し予定の登録ができます。

　5.ヘッダーの「マイページ」ボタンからマイページへ遷移し自身が登録した予定の一覧が表示されます。

WebブラウザGoogle Chromeの最新版を利用してアクセスしてください。

ただしデプロイ等で接続できないタイミングもございます。その際は少し時間をおいてから接続してください。

同時に複数の方がログインしている場合に、ログインできない可能性があります。

確認後、ログアウト処理をお願いします。


# 機能一覧
　・ユーザー登録

　・出店場所投稿

　・出店場所のMAP表示

　・出店場所ごとのスケジュール表示

　・出店予定の登録

　・マイページで自身の予定一覧表示

# 作成背景

昨年、友人とキッチンカーの運営をしていた際に出店可能な場所を一から電話で探す必要がありとても時間がかかりました。また貸し出し側のダブルブッキングなどで出店ができなくなる事態も発生し、非常に困った事もありました。
そこで、地域のキッチンカーの出店場所と場所ごとの出店予定がオーナー同士で共有できるアプリケーションを開発することでこのような手間やミスが減るのではと考え、このアプリを作成しました。

# 工夫した点
GoogleMapAPIの導入時、デフォルトではフォームに住所を入力しそれが自動でMapに反映される仕組みでしたが、今回はフォームからではなく投稿済みの場所のMapを表示させたかった為、データベースから事前に登録されたデータから緯度・経度を算出し反映させることで登録済みの場所の地図を表示させることが出来ました。
また、積極的にWEBや動画で検索し情報を得ていましたが、同じ挙動でも複数のやり方があるのでより可読性の高いコードに書き換えられるように努力しました。
また、タスクごとに自身で期限を設けそれに間に合うようにアラームをかけたりと時間を常に気にしながら作業を行なったところ全体のスケジュールより早く完成させることができました。

# 苦労した点
データベース設計の際のデータ型にミスがあった事によりエラーが起きてしまったことがありました。記事を参考にデータ型を選びましたが、似たような事例でも扱えるメソッドなどが違うことを理解しないまま設計を進めてしまったことで後にエラーが出て原因を探るのに時間がかかりました。テーブル設計の際にはデータ型の特徴やその他との違いを理解して確実に選んでいくことが大切だと実感しました。
また、それぞれのデータとモデルの紐付けの際難しく考えすぎてしまい本当はシンプルに実装できるものも、いろいろ試行錯誤して行くうちに不要なコードを長く書いてしまうことがありました。常にもっと分かりやすい書き方はないか、このコードは本当に必要かを判断しながら作成していきたいと思います。


# 実装予定の機能

　・予約管理機能の実装

# データベース設計

[![Image from Gyazo](https://i.gyazo.com/78cc9043cc9518d5ef7a08924c6ca823.png)](https://gyazo.com/78cc9043cc9518d5ef7a08924c6ca823)

# 開発環境
　・Ruby(2.6.5)

　・Ruby on Rails(6.0.0)

　・Javascript

　　　・Google APIs

　　　　　・Geocoding API

　　　　　・Maps Javascript API

　・MySQL

　・Git/GitHub

　・Visual Studio Code

　・AWS

　・Render

# 主なGem (ライブラリ)
　・devise(ユーザー管理機能)

　・simple_calendar(カレンダー作成)

　・active_hash(カテゴリ選択)

　・gon(JavaScriptへのデータ受け渡し)

　・rspec-rails(テストコード)

　・factory_bot_rails(テストデータ作成の効率化)

　・faker(ランダムデータ作成)

　・rubocop(静的コード解析,コードチェック)

　・aws-sdk-s3(AWS,S3)

# 利用インフラ
　・Render
